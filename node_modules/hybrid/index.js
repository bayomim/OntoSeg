/**
 * @author: Mostafa Bayomi
 * bayomim@tcd.ie
 */ 
var utils = require('utils');
var HAC = require('HAC').hac;
var iostream = require('iostream');
var pubVSM = [];

exports.run_system = function (textFile, vsmFile, cb) {

	var fileName = getfileName(textFile).replace(".clean",".txt");
   var vsm = iostream.readVSMFile(vsmFile);
   var vsmTxt = iostream.readTextFile(textFile);
   var initArr = utils.initArray(1,vsm);
   var vsmCopy = vsm.slice(); // copy by value
  HAC(vsmCopy, initArr, vsmTxt, function(fileStr){
	  fileStr =fileName+"\n"+fileStr;
	  cb(fileStr);
   });
};
function getfileName(filePath){
		filePath = filePath.split("\\");
		fileName = filePath[filePath.length-1];
		return fileName;
}